(this["webpackJsonpsalute-demo-app"]=this["webpackJsonpsalute-demo-app"]||[]).push([[0],{165:function(t,e,s){"use strict";s.r(e);var a=s(3),i=s(0),o=s.n(i),l=s(12),n=s.n(l),c=(s(76),s(59)),h=s(60),r=s(10),u=s(70),p=s(69),d=s.p+"static/media/unnamed.16989a75.gif",v=s.p+"static/media/1.faa4a944.gif",f=s.p+"static/media/22.4136651e.gif",g=s.p+"static/media/12.2fae7a1b.gif",m=s.p+"static/media/44.11222dc3.gif",L=s.p+"static/media/38.489e2560.gif",b=s.p+"static/media/39.162e65cd.gif",y=s.p+"static/media/17.c38a8421.gif",j=s.p+"static/media/18.8d571b49.gif",x=s.p+"static/media/8-1.0b1500a1.gif",S=s.p+"static/media/43.6373dfc9.gif",k=s.p+"static/media/25.85aaaa1b.gif",O=s.p+"static/media/42.8fdaa8a2.gif",C=s.p+"static/media/13.79dfcacf.gif",w=s.p+"static/media/5-1.761cd7bd.gif",T=s.p+"static/media/6.a6804373.gif",D=s.p+"static/media/2-1.80ce6c6a.gif",I=s(9),_=s(15),F=s(41),A=(s(77),s(61)),U=(s(78),s(14)),M=s.n(U),z=s(21),B=s(22),q=s.n(B),E="https://serene-inlet-82302.herokuapp.com/";function P(){return(P=Object(z.a)(M.a.mark((function t(e,s,a,i,o,l,n,c,h,r,u){var p,d;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.post(E+"user/",{UserId:e,name:s,foodLevel:a,sleepLevel:i,playLevel:o,timeOfExit:l,sec:n,min:c,hour:h,kusua:r,flag:u});case 2:return p=t.sent,d=p.data,t.abrupt("return",d);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return(R=Object(z.a)(M.a.mark((function t(e){var s,a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.get(E+"user/",{params:{UserId:e}});case 2:return s=t.sent,a=s.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(t,e,s,a,i,o,l,n,c,h,r){return H.apply(this,arguments)}function H(){return(H=Object(z.a)(M.a.mark((function t(e,s,a,i,o,l,n,c,h,r,u){var p;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p={UserId:e,name:s,foodLevel:a,playLevel:i,sleepLevel:o,timeOfExit:l,sec:n,min:c,hour:h,kusua:r,flag:u},console.log("body:",p),t.next=4,q.a.put(E+"user/",{UserId:e,name:s,foodLevel:a,playLevel:i,sleepLevel:o,timeOfExit:l,sec:n,min:c,hour:h,kusua:r,flag:u});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var J=function(t){Object(u.a)(s,t);var e=Object(p.a)(s);function s(t){var a;return Object(c.a)(this,s),a=e.call(this,t),console.log("constructor"),a.state={notes:[],UserId:"",logo:d,foodLevel:null,sleepLevel:null,playLevel:null,color1:"var(--plasma-colors-accent)",color2:"var(--plasma-colors-accent)",color3:"var(--plasma-colors-accent)",timeOfExit:0,hour:0,min:0,sec:0,name:"Sbercat",s:"",m:"",ch:"",flag:null,f:!1,kusua:null},a.Change_img=a.Change_img.bind(Object(r.a)(a)),a.changeColor=a.changeColor.bind(Object(r.a)(a)),a.timer=a.timer.bind(Object(r.a)(a)),a.words=a.words.bind(Object(r.a)(a)),a.changeFlag=a.changeFlag.bind(Object(r.a)(a)),a}return Object(h.a)(s,[{key:"timer",value:function(){this.state.logo===L?(this.state.hour=0,this.state.min=0,this.state.sec=0):this.setState({sec:this.state.sec+=1}),this.state.sec>=59&&(this.state.sec=0,this.state.min=this.state.min+1,this.state.min>=59&&(this.state.min=0,this.state.hour+=1)),(this.state.min>=1||this.state.our>=1)&&(this.state.f=!0)}},{key:"getTimeDifference",value:function(t){var e=new Date(t),s=new Date;console.log("Time of exit: ",e),console.log("Actual time: ",s);var a=s-e-108e5;return console.log("diffTime",a),a}},{key:"componentDidMount",value:function(){var t,e=this;console.log("componentDidMount"),this.assistant=(t=function(){return e.getStateForAssistant()},Object(A.a)({getState:t})),this.assistant.on("data",(function(t){if("smart_app_data"==t.type){console.log("User"),console.log(t),console.log("event.sub",t.sub),void 0!=t.sub&&(console.log("Sub",t.sub),e.state.UserId=t.sub,function(t,e,s,a,i,o,l,n,c,h,r){P.apply(this,arguments)}(e.state.UserId,e.state.name,100,100,100,new Date,e.state.sec,e.state.min,e.state.hour,!1,!0),function(t){return R.apply(this,arguments)}(e.state.UserId).then((function(t){console.log(t),e.setState({kusua:t.kusua}),e.setState({flag:t.flag}),e.Change_img(),e.setState({name:t.name}),e.setState({foodLevel:t.foodLevel}),e.setState({playLevel:t.playLevel}),e.setState({sleepLevel:t.sleepLevel}),e.didTamagatchiDie(),e.setState({sec:t.sec}),e.setState({min:t.min}),e.setState({hour:t.hour});var s=t.timeOfExit,a=e.getTimeDifference(s);e.state.foodLevel=e.state.foodLevel-Math.round(a/12e3),e.state.foodLevel<0&&(e.state.foodLevel=0),e.state.sleepLevel=e.state.sleepLevel-Math.round(a/6e4),e.state.sleepLevel<0&&(e.state.sleepLevel=0),e.state.playLevel=e.state.playLevel-Math.round(a/2e4),e.state.playLevel<0&&(e.state.playLevel=0),e.state.sec=e.state.sec+Math.round(a/1e3%60),e.state.min=e.state.min+Math.round(a/6e4%60),e.state.hour=e.state.hour+Math.round(a/36e5%24)})),G(e.state.UserId,e.state.name,e.state.foodLevel,e.state.playLevel,e.state.sleepLevel,new Date,e.state.sec,e.state.min,e.state.hour,e.state.kusua,e.state.flag)),console.log("assistant.on(data)",t);var s=t.action;e.dispatchAssistantAction(s)}})),this.assistant.on("start",(function(t){console.log("assistant.on(start)",t)})),setInterval((function(){G(e.state.UserId,e.state.name,e.state.foodLevel,e.state.playLevel,e.state.sleepLevel,new Date,e.state.sec,e.state.min,e.state.hour,e.state.kusua,e.state.flag)}),6e3),setInterval((function(){e.less(1),e.didTamagatchiDie(),e.changeColor()}),12e3),setInterval((function(){e.less(2),e.didTamagatchiDie(),e.changeColor()}),6e4),setInterval((function(){e.less(3),e.didTamagatchiDie(),e.changeColor()}),2e4),setTimeout((function(){return setInterval((function(){e.timer(),e.words()}),1e3)}),1e3)}},{key:"less",value:function(t){switch(t){case 1:this.state.foodLevel>0?this.setState({foodLevel:this.state.foodLevel-=1}):this.state.foodLevel=0;break;case 2:this.state.sleepLevel>0?this.setState({sleepLevel:this.state.sleepLevel-=1}):this.state.sleepLevel=0;break;case 3:this.state.playLevel>0?this.setState({playLevel:this.state.playLevel-=1}):this.state.playLevel=0}}},{key:"feed",value:function(){this.state.foodLevel=100}},{key:"sleep",value:function(){this.state.sleepLevel=100}},{key:"play",value:function(){this.state.playLevel=100}},{key:"didTamagatchiDie",value:function(){!1===this.state.kusua?(this.state.foodLevel>=60&&this.state.sleepLevel>=60&&this.state.playLevel>=60?this.setState({logo:v}):this.state.foodLevel<=this.state.sleepLevel&&this.state.foodLevel<=this.state.playLevel&&this.state.foodLevel<=60?this.setState({logo:b}):this.state.playLevel<=this.state.sleepLevel&&this.state.playLevel<=this.state.foodLevel&&this.state.playLevel<=60?this.setState({logo:y}):this.state.sleepLevel<=this.state.playLevel&&this.state.sleepLevel<=this.state.foodLevel&&this.state.sleepLevel<=60&&this.setState({logo:j}),this.state.foodLevel<=0&&this.state.sleepLevel<=0&&this.state.playLevel<=0&&this.setState({logo:L})):(this.state.foodLevel>=60&&this.state.sleepLevel>=60&&this.state.playLevel>=60?this.setState({logo:x}):this.state.foodLevel<=this.state.sleepLevel&&this.state.foodLevel<=this.state.playLevel&&this.state.foodLevel<=60?this.setState({logo:C}):this.state.playLevel<=this.state.sleepLevel&&this.state.playLevel<=this.state.foodLevel&&this.state.playLevel<=60?this.setState({logo:w}):this.state.sleepLevel<=this.state.playLevel&&this.state.sleepLevel<=this.state.foodLevel&&this.state.sleepLevel<=60&&this.setState({logo:T}),this.state.foodLevel<=0&&this.state.sleepLevel<=0&&this.state.playLevel<=0&&this.setState({logo:D}))}},{key:"changeColor",value:function(){this.state.foodLevel>60?this.setState({color1:"var(--plasma-colors-accent)"}):this.state.foodLevel<=60&&this.state.foodLevel>=30?this.setState({color1:"var(--plasma-colors-warning)"}):this.setState({color1:"var(--plasma-colors-critical)"}),this.state.playLevel>60?this.setState({color2:"var(--plasma-colors-accent)"}):this.state.playLevel<=60&&this.state.playLevel>=30?this.setState({color2:"var(--plasma-colors-warning)"}):this.setState({color2:"var(--plasma-colors-critical)"}),this.state.sleepLevel>60?this.setState({color3:"var(--plasma-colors-accent)"}):this.state.sleepLevel<=60&&this.state.sleepLevel>=30?this.setState({color3:"var(--plasma-colors-warning)"}):this.setState({color3:"var(--plasma-colors-critical)"})}},{key:"getStateForAssistant",value:function(){console.log("getStateForAssistant: this.state:",this.state);var t={item_selector:{items:this.state.notes.map((function(t,e){return{number:e+1,id:t.id,title:t.title}}))}};return console.log("getStateForAssistant: state:",t),t}},{key:"dispatchAssistantAction",value:function(t){if(console.log("dispatchAssistantAction",t),t)switch(t.type){case"to_feed":return this.Change_img(1);case"to_play":return this.Change_img(2);case"to_sleep":return this.Change_img(3);case"set_name":this.setState({name:t.note})}}},{key:"Change_img",value:function(t){var e=this;switch(t){case 1:!1===this.state.kusua?this.setState({logo:f}):this.setState({logo:S}),setTimeout((function(){e.didTamagatchiDie()}),3e3),this.feed(),this.changeColor();break;case 2:!1===this.state.kusua?this.setState({logo:g}):this.setState({logo:k}),setTimeout((function(){e.didTamagatchiDie()}),3e3),this.play(),this.changeColor();break;case 3:!1===this.state.kusua?this.setState({logo:m}):this.setState({logo:O}),setTimeout((function(){e.didTamagatchiDie()}),1e5),this.sleep(),this.changeColor();break;default:!1===this.state.kusua?this.setState({logo:v}):!0===this.state.kusua?this.setState({logo:x}):this.setState({logo:d})}}},{key:"changeFlag",value:function(t){switch(t){case 1:this.setState({flag:!0}),this.state.kusua=!1,this.Change_img();break;case 2:!0===this.state.f?(this.setState({flag:!1}),this.state.kusua=!0,this.Change_img()):F.b.success("\u0411\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0447\u0435\u0440\u0435\u0437 \u043c\u0438\u043d\u0443\u0442\u0443!",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});break;default:this.setState({flag:!0})}}},{key:"words",value:function(){0===this.state.min?this.state.m="":1===this.state.min?this.setState({m:"".concat(this.state.min," \u043c\u0438\u043d\u0443\u0442\u0443")}):this.state.min>1&&this.state.min<5?this.setState({m:"".concat(this.state.min," \u043c\u0438\u043d\u0443\u0442\u044b")}):this.setState({m:"".concat(this.state.min," \u043c\u0438\u043d\u0443\u0442")}),0===this.state.hour?this.state.ch="":1===this.state.hour?this.setState({ch:"".concat(this.state.hour," \u0447\u0430\u0441")}):this.state.hour>1&&this.state.hour<5?this.setState({ch:"".concat(this.state.hour," \u0447\u0430\u0441\u0430")}):this.setState({ch:"".concat(this.state.hour," \u0447\u0430\u0441\u043e\u0432")}),this.state.sec%10===1&&11!=this.state.sec?this.setState({s:"".concat(this.state.sec," \u0441\u0435\u043a\u0443\u043d\u0434\u0443")}):this.state.sec%10>1&&this.state.sec%10<5&&12!=this.state.sec&&13!=this.state.sec&&14!=this.state.sec?this.setState({s:"".concat(this.state.sec," \u0441\u0435\u043a\u0443\u043d\u0434\u044b")}):this.setState({s:"".concat(this.state.sec," \u0441\u0435\u043a\u0443\u043d\u0434")})}},{key:"render",value:function(){var t=this;console.log("render");var e=4*this.state.foodLevel,s=4*this.state.playLevel,i=4*this.state.sleepLevel,o=this.state.color1,l=this.state.color2,n=this.state.color3,c=this.state.name[0].toUpperCase()+this.state.name.slice(1);return Object(a.jsxs)("div",{children:[Object(a.jsxs)(I.Container,{children:[Object(a.jsx)(_.Row,{children:Object(a.jsx)(I.Col,{sizeXL:10,children:Object(a.jsxs)("h1",{children:[" ",c," \u0436\u0438\u0432\u0435\u0442 ",this.state.ch," ",this.state.m," ",this.state.s," "]})})}),Object(a.jsx)(_.Row,{children:Object(a.jsxs)(I.Col,{type:"calc",size:1,children:[" ",Object(a.jsx)("img",{id:"img",src:this.state.logo,class:"rounded mx-auto d-block",style:{width:400,height:400}})]})}),Object(a.jsx)(_.Row,{children:Object(a.jsxs)(I.Col,{sizeXL:10,offset:1,children:[Object(a.jsxs)(I.Tabs,{size:"l",view:"secondary",children:[Object(a.jsx)(I.TabItem,{isActive:this.state.flag,onClick:function(){return t.changeFlag(1)},children:"\u0421\u0431\u0435\u0440\u043a\u043e\u0442"}),Object(a.jsx)(I.TabItem,{isActive:!this.state.flag,onClick:function(){return t.changeFlag(2)},children:"\u041a\u0443\u0441\u044f"})]}),Object(a.jsx)(F.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})]}),Object(a.jsxs)("h1",{style:{position:"absolute",left:"500px",top:"77px"},children:[" ",this.state.foodLevel," "]}),Object(a.jsx)("div",{class:"rounded",style:{position:"absolute",width:e+"px",left:"570px",top:"100px",height:"35px",backgroundColor:o},children:" "}),Object(a.jsx)("h1",{style:{position:"absolute",left:"1000px",top:"77px"},children:" \u0421\u044b\u0442\u043e\u0441\u0442\u044c "}),Object(a.jsxs)("h1",{style:{position:"absolute",left:"500px",top:"177px"},children:[" ",this.state.playLevel," "]}),Object(a.jsx)("div",{class:"rounded",style:{position:"absolute",width:s+"px",left:"570px",top:"200px",height:"35px",backgroundColor:l},children:" "}),Object(a.jsx)("h1",{style:{position:"absolute",left:"1000px",top:"177px"},children:" \u0421\u0447\u0430\u0441\u0442\u044c\u0435 "}),Object(a.jsxs)("h1",{style:{position:"absolute",left:"500px",top:"277px"},children:[" ",this.state.sleepLevel," "]}),Object(a.jsx)("div",{class:"rounded",style:{position:"absolute",width:i+"px",left:"570px",top:"300px",height:"35px",backgroundColor:n},children:" "}),Object(a.jsx)("h1",{style:{position:"absolute",left:"1000px",top:"277px"},children:" \u0411\u043e\u0434\u0440\u043e\u0441\u0442\u044c "}),Object(a.jsx)(I.Button,{style:{position:"absolute",left:"500px",top:"400px"},text:"\u041f\u043e\u043a\u043e\u0440\u043c\u0438\u0442\u044c!",size:"l",view:"primary",pin:"square-square",onClick:function(){return t.Change_img(1)}}),Object(a.jsx)(I.Button,{style:{position:"absolute",left:"680px",top:"400px"},text:"\u041f\u043e\u0438\u0433\u0440\u0430\u0442\u044c!",size:"l",view:"primary",pin:"square-square",onClick:function(){return t.Change_img(2)}}),Object(a.jsx)(I.Button,{style:{position:"absolute",left:"845px",top:"400px"},text:"\u041f\u043e\u0441\u043f\u0430\u0442\u044c!",size:"l",view:"primary",pin:"square-square",onClick:function(){return t.Change_img(3)}})]})}}]),s}(o.a.Component),X=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,166)).then((function(e){var s=e.getCLS,a=e.getFID,i=e.getFCP,o=e.getLCP,l=e.getTTFB;s(t),a(t),i(t),o(t),l(t)}))},K=s(68),N=s(66),Q=s(1),V=s(67),W=s(2);function Y(){var t=Object(N.a)(["\n  html {\n    color: ",";\n    background-color: ",";\n    background-image: ",";\n\n    /** \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043b\u0438\u0442\u044c \u0433\u0440\u0430\u0434\u0438\u0435\u043d\u0442\u043e\u043c \u0432\u0441\u044e \u043f\u043e\u0434\u043b\u043e\u0436\u043a\u0443 */\n    min-height: 100vh;\n  }\n"]);return Y=function(){return t},t}var Z=Object(Q.createGlobalStyle)(Y(),W.text,W.background,W.gradient),$=Object(Q.createGlobalStyle)(V.darkSber),tt=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Z,{}),Object(a.jsx)($,{})]})};n.a.render(Object(a.jsxs)(K.DeviceThemeProvider,{children:[Object(a.jsx)(tt,{}),Object(a.jsx)(J,{})]}),document.getElementById("root")),X()},76:function(t,e,s){},78:function(t,e,s){}},[[165,1,2]]]);
//# sourceMappingURL=main.d3ba195d.chunk.js.map